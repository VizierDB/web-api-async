swagger: "2.0"

info:
  version: 0.5.0
  title: Vizier DB - Web API
  description: API to query and manipulate data curation projects managed by the Vizier
    Database Web Server
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html

schemes:
  - http
#host: cds-swg1.cims.nyu.edu
host: localhost:5000
basePath: /vizier-db/api/v1

paths:
    #
    # Overview
    #
    /:
        get:
            summary: Service description
            description: Essential information about the web service and relevant links
            operationId: serviceOverview
            tags:
                - service
            produces:
                - application/json
            responses:
                200:
                    description: Service descriptor
                    schema:
                        $ref: '#/definitions/ServiceDescriptor'
    #
    # Projects
    #
    /projects:
        get:
            summary: List projects
            description: List of all projects in the database
            operationId: listProjects
            tags:
                - project
            produces:
              - application/json
            responses:
                200:
                    description: A list of project descriptors
                    schema:
                        $ref: '#/definitions/ProjectListing'
        post:
            summary: Create project
            description: Create a new curation project
            operationId: createProject
            tags:
                - project
            parameters:
                - name: properties
                  in: body
                  required: true
                  description: Project execution environment and list of user-defined properties
                  schema:
                      $ref: '#/definitions/ProjectStatement'
            produces:
              - application/json
            responses:
                201:
                    description: Handle for new project
                    schema:
                        $ref: "#/definitions/ProjectDescriptor"
                400:
                    description: Invalid project properties
    /projects/{projectId}:
        delete:
            summary: Delete project
            description: Delete the project with the given identifier
            operationId: deleteProject
            tags:
                - project
            parameters:
                - name: projectId
                  in: path
                  required: true
                  description: The unique project identifier
                  type: string
            produces:
              - application/json
            responses:
                204:
                    description: Project deleted
                404:
                    description: Unknown project
        get:
            summary: Get project
            description: Get descriptor for project with given identifier
            operationId: getProject
            tags:
                - project
            parameters:
                - name: projectId
                  in: path
                  required: true
                  description: The unique project identifier
                  type: string
            responses:
                200:
                    description: Project metadata and references
                    schema:
                        $ref: "#/definitions/ProjectHandle"
                404:
                    description: Unknown project
        put:
            summary: Update project properties
            description: Updates the set of user-defined properties for a given project
            operationId: updateProjectProperties
            tags:
                - project
            parameters:
                - name: projectId
                  in: path
                  required: true
                  description: The unique project identifier
                  type: string
                - name: properties
                  in: body
                  required: true
                  description: List of user-defined properties
                  schema:
                      $ref: '#/definitions/ObjectPropertyUpdateStmt'
            produces:
              - application/json
            responses:
                200:
                    description: Successful update
                    schema:
                        $ref: '#/definitions/ProjectDescriptor'
    #
    # Branches
    #
    /projects/{projectId}/branches:
        post:
            summary: Create project branch
            description: Create a new workflow branch within a project
            operationId: createProjectBranch
            tags:
                - branch
            parameters:
                - name: projectId
                  in: path
                  required: true
                  description: The unique project identifier
                  type: string
                - name: branch
                  in: body
                  required: true
                  description: Reference to parent branch and module
                  schema:
                      $ref: "#/definitions/BranchStatement"
            produces:
                - application/json
            responses:
                200:
                    description: Descriptor for new workflow branch
                    schema:
                        $ref: '#/definitions/BranchDescriptor'
                400:
                    description: Invalid branch properties
                404:
                    description: Unknown project
    /projects/{projectId}/branches/{branchId}:
        delete:
            summary: Delete project branch
            description: Delete workflow branch from a given project
            operationId: deleteProjectBranch
            tags:
                - branch
            parameters:
                - name: projectId
                  in: path
                  required: true
                  description: The unique project identifier
                  type: string
                - name: branchId
                  in: path
                  required: true
                  description: Unique identifier of the project branch
                  type: string
            produces:
              - application/json
            responses:
                204:
                    description: Branch deleted
                404:
                    description: Unknown project or branch
        get:
            summary: Get project branch
            description: Get full history of the branch
            operationId: getProjectBranch
            tags:
                - branch
            parameters:
                - name: projectId
                  in: path
                  required: true
                  description: The unique project identifier
                  type: string
                - name: branchId
                  in: path
                  required: true
                  description: Unique identifier of the project branch
                  type: string
            produces:
                - application/json
            responses:
                200:
                    description: Branch handle
                    schema:
                        $ref: '#/definitions/BranchHandle'
                404:
                    description: Unknown project or branch
        put:
            summary: Update branch properties
            description: Updates the set of user-defined properties for a given project branch
            operationId: updateBranchProperties
            tags:
                - branch
            parameters:
                - name: projectId
                  in: path
                  required: true
                  description: The unique project identifier
                  type: string
                - name: branchId
                  in: path
                  required: true
                  description: Unique identifier of the project branch
                  type: string
                - name: properties
                  in: body
                  required: true
                  description: List of user-defined properties
                  schema:
                      $ref: '#/definitions/ObjectPropertyUpdateStmt'
            produces:
              - application/json
            responses:
                200:
                    description: Successful update
                    schema:
                        $ref: "#/definitions/BranchDescriptor"
    #
    # Workflows
    #
    /projects/{projectId}/branches/{branchId}/head:
        get:
            summary: Get branch head
            description: Get workflow at HEAD of a project branch
            operationId: getBranchHead
            tags:
                - workflow
            parameters:
                - name: projectId
                  in: path
                  required: true
                  description: The unique project identifier
                  type: string
                - name: branchId
                  in: path
                  required: true
                  description: Unique identifier of the project branch
                  type: string
            produces:
                - application/json
            responses:
                200:
                    description: Workflow handle
                    schema:
                        $ref: '#/definitions/WorkflowHandle'
                404:
                    description: Unknown project, branch, or workflow
        post:
            summary: Append module to branch head
            description: Append module to workflow at HEAD of given branch
            operationId: appendBranchHead
            tags:
                - workflow
            parameters:
                - name: projectId
                  in: path
                  required: true
                  description: The unique project identifier
                  type: string
                - name: branchId
                  in: path
                  required: true
                  description: Unique identifier of the project branch
                  type: string
                - name: module
                  in: body
                  required: true
                  description: Definition of module
                  schema:
                      $ref: '#/definitions/ModuleStatement'
            produces:
                - application/json
            responses:
                200:
                    description: Handle for appended module
                    schema:
                        $ref: '#/definitions/ModuleHandle'
                400:
                    description: Invalid module statement
                404:
                    description: Unknown project or branch
    /projects/{projectId}/branches/{branchId}/head/cancel:
        post:
            summary: Cancel workflow
            description: Cancel execution of all running or pending modules in the branch head
            operationId: cancelWorkflow
            tags:
                - workflow
            parameters:
                - name: projectId
                  in: path
                  required: true
                  description: The unique project identifier
                  type: string
                - name: branchId
                  in: path
                  required: true
                  description: Unique identifier of the project branch
                  type: string
            produces:
                - application/json
            responses:
                200:
                    description: Handle forthe resulting workflow
                    schema:
                        $ref: '#/definitions/WorkflowHandle'
                404:
                    description: Unknown project or branch
    /projects/{projectId}/branches/{branchId}/head/modules/{moduleId}:
        delete:
            summary: Delete module
            description: Delete existing module in workflow at HEAD of given branch
            operationId: deleteModule
            tags:
                - workflow
            parameters:
                - name: projectId
                  in: path
                  required: true
                  description: The unique project identifier
                  type: string
                - name: branchId
                  in: path
                  required: true
                  description: Unique identifier of the project branch
                  type: string
                - name: moduleId
                  in: path
                  required: true
                  description: Unique identifier of the workflow module
                  type: string
            produces:
                - application/json
            responses:
                200:
                    description: Modified workflow handle
                    schema:
                        $ref: '#/definitions/WorkflowUpdateResult'
                404:
                    description: Unknown project, branch, workflow, or module
        get:
            summary: Get module state
            description: Get state of a module in the head workflow of a branch
            operationId: getBranchHead
            tags:
                - workflow
            parameters:
                - name: projectId
                  in: path
                  required: true
                  description: The unique project identifier
                  type: string
                - name: branchId
                  in: path
                  required: true
                  description: Unique identifier of the project branch
                  type: string
                - name: moduleId
                  in: path
                  required: true
                  description: Unique identifier of the workflow module
                  type: string
            produces:
                - application/json
            responses:
                200:
                    description: Workflow handle
                    schema:
                        $ref: '#/definitions/ModuleHandle'
                404:
                    description: Unknown project, branch, or module
        post:
            summary: Insert module
            description: Insert a new module into workflow at HEAD of given branch
            operationId: insertModule
            tags:
                - workflow
            parameters:
                - name: projectId
                  in: path
                  required: true
                  description: The unique project identifier
                  type: string
                - name: branchId
                  in: path
                  required: true
                  description: Unique identifier of the project branch
                  type: string
                - name: moduleId
                  in: path
                  required: true
                  description: Unique identifier of the workflow module
                  type: string
                - name: module
                  in: body
                  required: true
                  description: Definition of module
                  schema:
                      $ref: '#/definitions/ModuleStatement'
            produces:
                - application/json
            responses:
                200:
                    description: Modified workflow handle
                    schema:
                        $ref: '#/definitions/WorkflowUpdateResult'
                400:
                    description: Invalid module statement
                404:
                    description: Unknown project, branch, workflow, or module
        put:
            summary: Replace module
            description: Replace existing module in workflow at HEAD of given branch
            operationId: replaceModule
            tags:
                - workflow
            parameters:
                - name: projectId
                  in: path
                  required: true
                  description: The unique project identifier
                  type: string
                - name: branchId
                  in: path
                  required: true
                  description: Unique identifier of the project branch
                  type: string
                - name: moduleId
                  in: path
                  required: true
                  description: Unique identifier of the workflow module
                  type: string
                - name: module
                  in: body
                  required: true
                  description: Definition of module
                  schema:
                      $ref: '#/definitions/ModuleStatement'
            produces:
                - application/json
            responses:
                200:
                    description: Modified workflow handle
                    schema:
                        $ref: '#/definitions/WorkflowUpdateResult'
                400:
                    description: Invalid module statement
                404:
                    description: Unknown project, branch, workflow, or module
    /projects/{projectId}/branches/{branchId}/workflows/{workflowId}:
        get:
            summary: Get workflow
            description: Get a workflow in a project branches history
            operationId: getWorkflow
            tags:
                - workflow
            parameters:
                - name: projectId
                  in: path
                  required: true
                  description: The unique project identifier
                  type: string
                - name: branchId
                  in: path
                  required: true
                  description: Unique identifier of the project branch
                  type: string
                - name: workflowId
                  in: path
                  required: true
                  description: Unique workflow identifier
                  type: string
            produces:
                - application/json
            responses:
                200:
                    description: Workflow handle
                    schema:
                        $ref: '#/definitions/WorkflowHandle'
                404:
                    description: Unknown project, branch, or workflow
    #
    # Tasks
    #
    /projects/{projectId}/tasks/{taskId}:
        put:
            summary: Update task state
            description: Update the state of a running task
            operationId: updateTaskState
            tags:
                - task
            parameters:
                - name: projectId
                  in: path
                  required: true
                  description: The unique project identifier
                  type: string
                - name: taskId
                  in: path
                  required: true
                  description: Unique identifier of the task
                  type: string
                - name: modifier
                  in: body
                  required: true
                  description: Definition of module
                  schema:
                      $ref: '#/definitions/TaskModifier'
            produces:
                - application/json
            responses:
                200:
                    description: Modified workflow handle
                    schema:
                        type: object
                        required:
                            - result
                        properties:
                            result:
                                type: integer
                400:
                    description: Invalid task modifier
                404:
                    description: Unknown project or task
    #
    # Files
    #
    /projects/{projectId}/files:
        post:
            summary: Upload file
            description: Upload file from local disk
            operationId: uploadFile
            tags:
                - file
            parameters:
                - name: projectId
                  in: path
                  required: true
                  description: The unique project identifier
                  type: string
                - name: file
                  in: formData
                  required: true
                  description: File data
                  type: file
            consumes:
                - multipart/form-data
            produces:
                - application/json
            responses:
                201:
                    description: Upload successful
                    schema:
                        $ref: "#/definitions/FileHandle"
                400:
                    description: Invalid file or request
                413:
                    description: Uploaded file size exceeds limit
    /projects/{projectId}/files/{fileId}:
        get:
            summary: Download file
            description: Download file from file server
            operationId: downloadFile
            tags:
                - file
            parameters:
                - name: projectId
                  in: path
                  required: true
                  description: The unique project identifier
                  type: string
                - name: fileId
                  in: path
                  required: true
                  description: Unique file identifier
                  type: string
            produces:
                - text/csv
                - application/gzip
            responses:
                200:
                    description: File
                404:
                    description: Unknown file
    #
    # Datasets
    #
    /datasets/{datasetId}:
        get:
            summary: Get dataset
            description: Get columns and cell values for dataset
            operationId: getDataset
            tags:
                - dataset
            parameters:
                - name: datasetId
                  in: path
                  required: true
                  description: The unique dataset identifier
                  type: string
                - name: offset
                  in: query
                  required: false
                  description: Row offset for pagination
                  type: integer
                - name: limit
                  in: query
                  required: false
                  description: Row limit for pagination
                  type: integer
            produces:
                - application/json
            responses:
                200:
                    description: Dataset data
                    schema:
                        $ref: '#/definitions/DatasetHandle'
                404:
                    description: Unknown dataset
    /datasets/{datasetId}/annotations:
        get:
            summary: Get dataset annotations
            description: Get all annotations that are associated with dataset components
            operationId: getDatasetAnnotations
            tags:
                - dataset
            parameters:
                - name: datasetId
                  in: path
                  required: true
                  description: The unique dataset identifier
                  type: string
                - name: column
                  in: query
                  required: false
                  description: Unique column identifier
                  type: integer
                - name: row
                  in: query
                  required: false
                  description: Unique row identifier
                  type: integer
            produces:
                - application/json
            responses:
                200:
                    description: Dataset data
                    schema:
                        $ref: '#/definitions/DatasetAnnotations'
                404:
                    description: Unknown dataset
        post:
            summary: Update dataset annotations
            description: Update an annotations that is associated with a dataset component
            operationId: updateDatasetAnnotation
            tags:
                - dataset
            parameters:
                - name: datasetId
                  in: path
                  required: true
                  description: The unique dataset identifier
                  type: string
                - name: annotation
                  in: body
                  description: Update annotation statement
                  required: true
                  schema:
                      $ref: '#/definitions/UpdateAnnotationStatement'
            produces:
                - application/json
            responses:
                200:
                    description: Dataset data
                    schema:
                        $ref: '#/definitions/DatasetAnnotations'
                400:
                    description: Invalid request
                404:
                    description: Unknown dataset
    /datasets/{datasetsIdentifier}/csv:
        get:
            summary: Get CSV file
            description: Get dataset in CSF format
            operationId: downloadDataset
            tags:
                - dataset
            parameters:
                - name: datasetsIdentifier
                  in: path
                  required: true
                  description: The unique datasets identifier
                  type: string
            produces:
                - text/csv
            responses:
                200:
                    description: CSV file
                404:
                    description: Unknown datasets
    #
    # Views
    #
    /projects/{projectId}/branches/{branchId}/workflows/{workflowId}/modules/{moduleId}/views/{viewId}:
        get:
            summary: Get dataset view
            description: Access content of a dataset view for a given workflow module version
            operationId: getDatasetChartView
            tags:
                - chart
            parameters:
                - name: projectId
                  in: path
                  required: true
                  description: The unique project identifier
                  type: string
                - name: branchId
                  in: path
                  required: true
                  description: Unique identifier of the project branch
                  type: string
                - name: workflowId
                  in: path
                  required: true
                  description: Unique workflow identifier
                  type: integer
                - name: moduleId
                  in: path
                  required: true
                  description: Identifier of module
                  type: integer
                - name: viewId
                  in: path
                  required: true
                  description: Identifier of chart view
                  type: string
            produces:
                - application/json
            responses:
                200:
                    description: Dataset chart view content
                    schema:
                        $ref: '#/definitions/DatasetChartView'
                404:
                    description: Unknown project, branch, workflow, module, or view

definitions:
    BranchDescriptor:
        type: object
        description: Fundamental branch information
        required:
            - id
            - createdAt
            - lastModifiedAt
            - isDefault
            - properties
            - links
        properties:
            id:
                type: string
            createdAt:
                type: string
            lastModifiedAt:
                type: string
            isDefault:
                type: boolean
            properties:
                type: array
                items:
                    $ref: "#/definitions/ObjectProperty"
            links:
                type: array
                items:
                    $ref: "#/definitions/Reference"
    BranchHandle:
        type: object
        description: Complete branch information
        required:
            - id
            - createdAt
            - lastModifiedAt
            - workflows
            - properties
            - links
        properties:
            id:
                type: string
            createdAt:
                type: string
            lastModifiedAt:
                type: string
            workflows:
                type: array
                items:
                    $ref: "#/definitions/WorkflowDescriptor"
            properties:
                type: array
                items:
                    $ref: "#/definitions/ObjectProperty"
            links:
                type: array
                items:
                    $ref: "#/definitions/Reference"
    BranchStatement:
        type: object
        description: Branch point and properties for new branch
        required:
            - properties
        properties:
            source:
                type: object
                required:
                    - branchId
                    - workflowId
                    - moduleId
                properties:
                    branch:
                        type: string
                    workflowId:
                        type: string
                    moduleId:
                        type: string
            properties:
                type: array
                items:
                    $ref: "#/definitions/ObjectProperty"
    ChartDescriptor:
        type: object
        description: Descriptor for a chart view
        required:
            - name
            - links
        properties:
            id:
                type: string
            name:
                type: string
            links:
                type: array
                items:
                    $ref: '#/definitions/Reference'
    DatasetAnnotations:
        type: object
        description: Annotations for a dataset component
        required:
            - annotations
            - links
        properties:
            column:
                type: integer
            row:
                type: integer
            annotations:
                type: array
                items:
                    required:
                        - id
                        - key
                        - value
                    properties:
                        id:
                            type: integer
                        key:
                            type: string
                        value:
                            type: string
            links:
                type: array
                items:
                    $ref: "#/definitions/Reference"
    DatasetChartView:
        type: object
        description: Dataset chart view content
        required:
            - name
            - data
            - links
        properties:
            name:
                type: string
            data:
                type: object
                required:
                    - series
                    - xAxis
                properties:
                    series:
                        type: array
                        items:
                            type: object
                            required:
                                - label
                                - data
                            properties:
                                label:
                                    type: string
                                data:
                                    type: array
                                    items:
                                        type: integer
                    xAxis:
                        type: object
                        required:
                            - data
                        properties:
                            data:
                                type: array
                                items:
                                    type: integer
                    chart:
                        type: object
                        required:
                            - type
                            - grouped
                        properties:
                            type:
                                type: string
                            grouped:
                                type: boolean
            links:
                type: array
                items:
                    $ref: "#/definitions/Reference"
    DatasetColumn:
        type: object
        description: Column in a dataset
        required:
            - id
            - name
        properties:
            id:
                type: integer
            name:
                type: string
    DatasetDescriptor:
        type: object
        description: Descriptor containing dataset metadata
        required:
            - id
            - name
            - columns
            - rows
            - links
        properties:
            id:
                type: string
            name:
                type: string
            columns:
                type: array
                items:
                    $ref: "#/definitions/DatasetColumn"
            rows:
                type: integer
            links:
                type: array
                items:
                    $ref: "#/definitions/Reference"
    DatasetHandle:
        type: object
        description: Columns and cell values in a dataset
        required:
            - id
            - columns
            - rows
            - offset
            - rowcount
            - annotatedCells
            - links
        properties:
            id:
                type: string
            columns:
                type: array
                items:
                    $ref: "#/definitions/DatasetColumn"
            rows:
                type: array
                items:
                    $ref: "#/definitions/DatasetRow"
            offset:
                type: integer
            rowcount:
                type: integer
            annotatedCells:
                type: array
                items:
                    type: object
                    properties:
                        column:
                            type: integer
                        row:
                            type: integer
            links:
                type: array
                items:
                    $ref: "#/definitions/Reference"
    DatasetIdentifier:
        type: object
        description: Named dataset associated with workflow state
        required:
            - id
            - name
        properties:
            id:
                type: string
            name:
                type: string
    DatasetRow:
        type: object
        description: Row in a dataset
        required:
            - id
            - index
            - values
        properties:
            id:
                type: integer
            index:
                type: integer
            values:
                type: array
                items:
                    type: string
    FileHandle:
        type: object
        description: Metadata for uploaded file
        required:
            - id
            - name
            - links
        properties:
            id:
                type: string
            name:
                type: string
            mimetype:
                type: string
            encoding:
                type: string
            links:
                type: array
                items:
                    $ref: "#/definitions/Reference"
    ModuleHandle:
        type: object
        description: Module in VizUAL workflow
        required:
            - id
            - state
            - command
            - text
            - timestamps
            - links
        properties:
            id:
                type: string
            state:
                type: integer
            command:
                $ref: "#/definitions/ModuleStatement"
            text:
                type: string
            timestamps:
                type: object
                required:
                    - createdAt
                properties:
                    createdAt:
                        type: string
                    startedAt:
                        type: string
                    finishedAt:
                        type: string
            outputs:
                $ref: '#/definitions/ModuleOutputs'
            datasets:
                type: array
                items:
                    $ref: '#/definitions/DatasetDescriptor'
            links:
                type: array
                items:
                    $ref: '#/definitions/Reference'
    ModuleOutputs:
        type: object
        required:
            - stdout
            - stderr
        properties:
            stdout:
                type: array
                items:
                    $ref: '#/definitions/OutputObject'
            stderr:
                type: array
                items:
                    $ref: '#/definitions/OutputObject'
    ModuleStatement:
        type: object
        description: Definition of a command to evaluate against a workflow state
        required:
            - packageId
            - commandId
            - arguments
        properties:
            packageId:
                type: string
            commandId:
                type: string
            arguments:
                type: array
    ObjectProperty:
        type: object
        description: Key-value pair for user-defined object properties
        required:
            - key
            - value
        properties:
            key:
                type: string
            value:
                type: string
    ObjectPropertyUpdateStmt:
        type: object
        description: Update statement for a object properties.
        required:
            - properties
        properties:
            properties:
                type: array
                items:
                    type: object
                    required:
                        - key
                    properties:
                        key:
                            type: string
                        value:
                            type: string
    OutputObject:
        type: object
        description: Object in module output stream
        required:
            - type
            - value
        properties:
            type:
                type: string
            value:
                type: string
    PackageDeclaration:
        type: object
        description: Declaration of commands for package of workflow modules
        required:
            - id
            - name
            - commands
        properties:
            id:
                type: string
            name:
                type: string
            description:
                type: string
            commands:
                type: array
                items:
                    type: object
                    required:
                        - id
                        - name
                        - arguments
                    properties:
                        id:
                            type: string
                        name:
                            type: string
                        description:
                            type: string
                        group:
                            type: string
                        parameters:
                            type: array
                            items:
                                type: object
                                required:
                                    - id
                                    - name
                                    - index
                                    - datatype
                                    - required
                                properties:
                                    id:
                                        type: string
                                    name:
                                        type: string
                                    datatype:
                                        type: string
                                    index:
                                        type: integer
                                    hidden:
                                        type: boolean
                                    parent:
                                        type: string
                                    required:
                                        type: boolean
                                    values:
                                        type: array
                                        items:
                                            type: object
                                            required:
                                                - value
                                                - text
                                                - isDefault
                                            properties:
                                                value:
                                                    type: string
                                                text:
                                                    type: string
                                                isDefault:
                                                    type: boolean
    ProjectDescriptor:
        type: object
        description: Fundamental project metadata and references
        required:
            - id
            - createdAt
            - lastModifiedAt
            - properties
            - links
        properties:
            id:
                type: string
            createdAt:
                type: string
            lastModifiedAt:
                type: string
            properties:
                type: array
                items:
                    $ref: '#/definitions/ObjectProperty'
            links:
                type: array
                items:
                    $ref: "#/definitions/Reference"
    ProjectHandle:
        type: object
        description: Extended project metadata and references
        required:
            - id
            - createdAt
            - lastModifiedAt
            - properties
            - branches
            - packages
            - links
        properties:
            id:
                type: string
            createdAt:
                type: string
            lastModifiedAt:
                type: string
            properties:
                type: array
                items:
                    $ref: "#/definitions/ObjectProperty"
            branches:
                type: array
                items:
                    $ref: '#/definitions/BranchDescriptor'
            packages:
                type: array
                items:
                    $ref: '#/definitions/PackageDeclaration'
            links:
                type: array
                items:
                    $ref: "#/definitions/Reference"
    ProjectListing:
        type: object
        required:
            - projects
            - links
        properties:
            projects:
                type: array
                items:
                    $ref: "#/definitions/ProjectDescriptor"
            links:
                type: array
                items:
                    $ref: '#/definitions/Reference'
    ProjectStatement:
        type: object
        required:
            - properties
        properties:
            properties:
                type: array
                items:
                    $ref: '#/definitions/ObjectProperty'
    Reference:
        type: object
        description: "HATEOAS reference object"
        required:
            - rel
            - href
        properties:
            rel:
                type: string
            href:
                type: string
    ResourceName:
        type: object
        description: Name of a resource
        required:
            - name
        properties:
            name:
                type: string
    ServiceDescriptor:
        type: object
        description: Basic service properties
        required:
            - name
            - startedAt
            - version
            - defaults
            - environment
            - links
        build:
            name:
                type: string
            startedAt:
                type: string
            version:
                type: string
            defaults:
                type: object
                required:
                    - maxFileSize
                properties:
                    maxFileSize:
                        type: integer
            environment:
                type: object
                required:
                    - name
                    - version
                properties:
                    name:
                        type: string
                    version:
                        type: string
            links:
                type: array
                items:
                    $ref: "#/definitions/Reference"
    TaskModifier:
        type: object
        description: Change the state of a running task
        required:
            - state
        properties:
            state:
                type: integer
            startedAt:
                type: string
            finishedAt:
                type: string
            outputs:
                $ref: '#/definitions/ModuleOutputs'
            datasets:
                type: array
                items:
                    $ref: '#/definitions/DatasetDescriptor'
            provenance:
                type: object
                required:
                    - read
                    - write
                properties:
                    read:
                        type: array
                        items:
                            $ref: '#/definitions/DatasetIdentifier'
                    write:
                        type: array
                        items:
                            $ref: '#/definitions/DatasetIdentifier'
                    delete:
                        type: array
                        items:
                            type: string
                    resources:
                        type: object
    UpdateAnnotationStatement:
        type: object
        description: Update statement for resource annotation
        required:
            - key
        properties:
            annoId:
                type: integer
            columnId:
                type: integer
            rowId:
                type: integer
            key:
                type: string
            value:
                type: string
    WorkflowDescriptor:
        type: object
        description: Fundamental workflow metadata and references
        required:
            - id
            - createdAt
            - action
            - packageId
            - commandId
            - links
        properties:
            id:
                type: string
            createdAt:
                type: string
            action:
                type: string
            packageId:
                type: string
            commandId:
                type: string
            links:
                type: array
                items:
                    $ref: "#/definitions/Reference"
    WorkflowHandle:
        type: object
        description: Comprehensive workflow version information
        required:
            - identifier
            - createdAt
            - action
            - packageId
            - commandId
            - state
            - modules
            - datasets
            - charts
            - readOnly
            - links
        properties:
            identifier:
                type: string
            createdAt:
                type: string
            action:
                type: string
            packageId:
                type: string
            state:
                type: integer
            modules:
                type: array
                items:
                    $ref: '#/definitions/ModuleHandle'
            datasets:
                type: array
                items:
                    $ref: '#/definitions/DatasetDescriptor'
            charts:
                type: array
                items:
                    $ref: '#/definitions/ChartDescriptor'
            readOnly:
                type: boolean
            links:
                type: array
                items:
                    $ref: '#/definitions/Reference'
    WorkflowUpdateResult:
        type: object
        description: List of handles for modules that were affected by a workflow update
        required:
            - modules
        properties:
            modules:
                type: array
                items:
                    $ref: '#/definitions/ModuleHandle'
